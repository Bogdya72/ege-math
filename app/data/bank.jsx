import React from 'react';

/* ═══════════════════════════════════════════════════════════
   ЗАДАЧИ ИЗ БАНКА ФИПИ / РЕШУ ЕГЭ (2025-2026)
   Реальные прототипы задания №1 (Планиметрия)
   Каждая задача: q=условие, h=подсказка, s=решение, a=ответ, fig=рисунок
═══════════════════════════════════════════════════════════ */

// SVG-рисунки (можно переиспользовать)
const PF = {
  right_abc: (
    <svg width="120" height="95" viewBox="0 0 120 95">
      <polygon points="10,85 10,12 95,85" fill="#e8f0ff" stroke="#5b8eff" strokeWidth="1.5"/>
      <rect x="10" y="74" width="10" height="10" fill="none" stroke="#5b8eff" strokeWidth="1.2"/>
      <text x="5" y="10" fill="#5b8eff" fontSize="11" fontFamily="Caveat,cursive">A</text>
      <text x="5" y="94" fill="#5b8eff" fontSize="11" fontFamily="Caveat,cursive">C</text>
      <text x="98" y="90" fill="#5b8eff" fontSize="11" fontFamily="Caveat,cursive">B</text>
    </svg>
  ),
  iso_abc: (
    <svg width="120" height="90" viewBox="0 0 120 90">
      <polygon points="60,10 10,80 110,80" fill="#f0e8ff" stroke="#9b6dff" strokeWidth="1.5"/>
      <line x1="60" y1="10" x2="60" y2="80" stroke="#9b6dff" strokeWidth="1.2" strokeDasharray="3,2"/>
      <text x="58" y="8" fill="#9b6dff" fontSize="11" fontFamily="Caveat,cursive">C</text>
      <text x="5" y="88" fill="#9b6dff" fontSize="11" fontFamily="Caveat,cursive">A</text>
      <text x="110" y="88" fill="#9b6dff" fontSize="11" fontFamily="Caveat,cursive">B</text>
      <text x="63" y="75" fill="#9b6dff" fontSize="10" fontFamily="Caveat,cursive">H</text>
    </svg>
  ),
  trap: (
    <svg width="120" height="80" viewBox="0 0 120 80">
      <polygon points="30,70 40,15 90,15 110,70" fill="#fff8e8" stroke="#ffb547" strokeWidth="1.5"/>
      <line x1="40" y1="15" x2="40" y2="70" stroke="#ff5a5a" strokeWidth="1.2" strokeDasharray="3,2"/>
      <text x="43" y="45" fill="#ff5a5a" fontSize="10" fontFamily="Caveat,cursive">h</text>
    </svg>
  ),
  circ: (
    <svg width="100" height="100" viewBox="0 0 100 100">
      <circle cx="50" cy="50" r="40" fill="rgba(45,212,191,.07)" stroke="#2dd4bf" strokeWidth="1.5"/>
      <circle cx="50" cy="50" r="2" fill="#2dd4bf"/>
      <text x="52" y="48" fill="#2dd4bf" fontSize="10" fontFamily="Caveat,cursive">O</text>
    </svg>
  ),
  rhomb: (
    <svg width="100" height="80" viewBox="0 0 100 80">
      <polygon points="50,5 90,40 50,75 10,40" fill="rgba(61,220,151,.1)" stroke="#3ddc97" strokeWidth="1.5"/>
      <line x1="10" y1="40" x2="90" y2="40" stroke="#3ddc97" strokeWidth="1" strokeDasharray="3,2"/>
      <line x1="50" y1="5" x2="50" y2="75" stroke="#3ddc97" strokeWidth="1" strokeDasharray="3,2"/>
    </svg>
  )
};

export const BANK = {
  right: [
    {
      q: 'В прямоугольном треугольнике катет AC = 7, а катет BC = 24. Найдите гипотенузу AB.',
      h: 'По теореме Пифагора: c² = a² + b²',
      s: 'AB = √(AC² + BC²) = √(7² + 24²) = √(49 + 576) = √625 = <b>25</b>',
      a: 25,
      fig: PF.right_abc
    },
    {
      q: 'В прямоугольном треугольнике гипотенуза равна 17, а один из катетов равен 8. Найдите другой катет.',
      h: 'По теореме Пифагора: a² = c² - b²',
      s: 'x = √(17² - 8²) = √(289 - 64) = √225 = <b>15</b>',
      a: 15,
      fig: PF.right_abc
    },
    {
      q: 'В треугольнике ABC угол C равен 90°, AB = 10, AC = 6. Найдите sin B.',
      h: 'Синус угла B — это отношение противолежащего катета AC к гипотенузе AB.',
      s: 'sin B = AC / AB = 6 / 10 = <b>0.6</b>',
      a: 0.6,
      fig: PF.right_abc
    },
    {
      q: 'В треугольнике ABC угол C равен 90°, AB = 25, BC = 20. Найдите cos B.',
      h: 'Косинус угла B — это отношение прилежащего катета BC к гипотенузе AB.',
      s: 'cos B = BC / AB = 20 / 25 = 4 / 5 = <b>0.8</b>',
      a: 0.8,
      fig: PF.right_abc
    },
    {
      q: 'В треугольнике ABC угол C равен 90°, AC = 4, tg A = 0.75. Найдите BC.',
      h: 'tg A = BC / AC. Значит BC = AC · tg A.',
      s: 'BC = 4 · 0.75 = <b>3</b>',
      a: 3,
      fig: PF.right_abc
    },
    {
      q: 'Катеты прямоугольного треугольника равны 6 и 8. Найдите высоту, проведённую к гипотенузе.',
      h: 'Сначала найдите гипотенузу, затем используйте формулу площади или подобие: h = (a·b)/c.',
      s: '1) Гипотенуза c = √(36+64) = 10. 2) h = (6·8)/10 = 48/10 = <b>4.8</b>',
      a: 4.8,
      fig: PF.right_abc
    }
  ],
  isosceles: [
    {
      q: 'В треугольнике ABC AC = BC, высота AH равна 4, угол C равен 30°. Найдите AC.',
      h: 'В прямоугольном треугольнике AHC катет AH лежит против угла 30°. Значит, он равен половине гипотенузы AC.',
      s: 'AH = AC · sin 30° ⇒ 4 = AC · 0.5 ⇒ AC = 4 / 0.5 = <b>8</b>',
      a: 8,
      fig: PF.iso_abc
    },
    {
      q: 'В треугольнике ABC AC = BC = 10, AB = 12. Найдите высоту CH.',
      h: 'В равнобедренном треугольнике высота CH является и медианой. AH = AB / 2.',
      s: 'AH = 12 / 2 = 6. Из △AHC по Пифагору: CH = √(10² - 6²) = √(100 - 36) = <b>8</b>',
      a: 8,
      fig: PF.iso_abc
    },
    {
      q: 'В треугольнике ABC AC = BC, AB = 10, высота AH = 8. Найдите cos A.',
      h: 'В равнобедренном треугольнике углы при основании равны. Найдите cos B из △ABH или используйте другие свойства.',
      s: 'В △ABH (прямоугольном): BH = √(10² - 8²) = 6. cos B = BH/AB = 6/10 = 0.6. Так как ∠A = ∠B, то cos A = <b>0.6</b>',
      a: 0.6,
      fig: PF.iso_abc
    },
    {
      q: 'В равнобедренном треугольнике ABC с основанием AC внешний угол при вершине C равен 123°. Найдите величину угла ABC. Ответ дайте в градусах.',
      h: 'Смежный угол BCA = 180° - 123°. Углы при основании равны. Сумма углов 180°.',
      s: '∠BCA = 180° - 123° = 57°. ∠BAC = 57°. ∠ABC = 180° - (57° + 57°) = 180° - 114° = <b>66</b>',
      a: 66,
      fig: PF.iso_abc
    }
  ],
  general: [
    {
      q: 'В треугольнике ABC угол C равен 58°, AD и BE — биссектрисы, пересекающиеся в точке O. Найдите угол AOB. Ответ дайте в градусах.',
      h: '∠AOB = 90° + ∠C / 2 (свойство биссектрис). Или через сумму углов.',
      s: '∠AOB = 90° + 58°/2 = 90° + 29° = <b>119</b>',
      a: 119
    },
    {
      q: 'В треугольнике ABC угол A равен 40°, внешний угол при вершине B равен 102°. Найдите угол C. Ответ дайте в градусах.',
      h: 'Внешний угол равен сумме двух внутренних, не смежных с ним.',
      s: '102° = ∠A + ∠C ⇒ 102° = 40° + ∠C ⇒ ∠C = 102° - 40° = <b>62</b>',
      a: 62
    },
    {
      q: 'Площадь треугольника ABC равна 24, DE — средняя линия, параллельная стороне AB. Найдите площадь треугольника CDE.',
      h: 'Треугольник CDE подобен ABC с коэффициентом 1/2. Площади относятся как k².',
      s: 'S(CDE) = S(ABC) · (1/2)² = 24 · 1/4 = <b>6</b>',
      a: 6
    },
    {
      q: 'У треугольника со сторонами 9 и 6 угол между ними равен 30°. Найдите площадь треугольника.',
      h: 'S = ½ · a · b · sin γ',
      s: 'S = 0.5 · 9 · 6 · 0.5 = <b>13.5</b>',
      a: 13.5
    }
  ],
  parallel: [
    {
      q: 'Найдите площадь ромба, если его диагонали равны 14 и 6.',
      h: 'S = ½ · d₁ · d₂',
      s: 'S = 0.5 · 14 · 6 = <b>42</b>',
      a: 42,
      fig: PF.rhomb
    },
    {
      q: 'Площадь параллелограмма равна 40, а две его стороны равны 5 и 10. Найдите его высоты. В ответе укажите большую высоту.',
      h: 'S = a · h₁ = b · h₂. Найдите обе высоты и выберите большую.',
      s: 'h₁ = 40/5 = 8. h₂ = 40/10 = 4. Большая высота = <b>8</b>',
      a: 8
    },
    {
      q: 'Найдите площадь квадрата, если его диагональ равна 10.',
      h: 'S = d² / 2',
      s: 'S = 10² / 2 = 100 / 2 = <b>50</b>',
      a: 50
    },
    {
      q: 'В ромбе ABCD угол ABC равен 122°. Найдите угол ACD. Ответ дайте в градусах.',
      h: 'Диагональ ромба является биссектрисой угла. Соседние углы в сумме 180°.',
      s: '∠BCD = 180° - 122° = 58°. Диагональ AC делит угол пополам: ∠ACD = 58° / 2 = <b>29</b>',
      a: 29,
      fig: PF.rhomb
    }
  ],
  trapezoid: [
    {
      q: 'Основания трапеции равны 4 и 10, а высота равна 5. Найдите площадь этой трапеции.',
      h: 'S = ½(a + b)h',
      s: 'S = 0.5 · (4 + 10) · 5 = 7 · 5 = <b>35</b>',
      a: 35,
      fig: PF.trap
    },
    {
      q: 'Средняя линия трапеции равна 12, а одно из оснований равно 5. Найдите другое основание.',
      h: 'm = (a + b) / 2',
      s: '12 = (5 + x) / 2 ⇒ 24 = 5 + x ⇒ x = <b>19</b>',
      a: 19,
      fig: PF.trap
    },
    {
      q: 'Основания равнобедренной трапеции равны 14 и 26, а ее боковые стороны равны 10. Найдите площадь трапеции.',
      h: 'Проведите высоты. Они отсекают прямоугольные треугольники. Найдите высоту по Пифагору.',
      s: 'Нижнее основание делится на отрезки: x, 14, x. 2x = 26 - 14 = 12 ⇒ x = 6. Высота h = √(10² - 6²) = 8. S = 0.5(14+26)·8 = 20·8 = <b>160</b>',
      a: 160,
      fig: PF.trap
    }
  ],
  angles: [
    {
      q: 'Найдите вписанный угол, опирающийся на дугу, которая составляет 1/5 длины окружности. Ответ дайте в градусах.',
      h: 'Вся окружность = 360°. Найдите градусную меру дуги, затем угол.',
      s: 'Дуга = 360° / 5 = 72°. Вписанный угол = дуга / 2 = 72° / 2 = <b>36</b>',
      a: 36,
      fig: PF.circ
    },
    {
      q: 'Угол ACO равен 28°, где O — центр окружности. Его сторона CA касается окружности. Найдите величину меньшей дуги AB окружности, заключенной внутри этого угла. Ответ дайте в градусах.',
      h: 'Касательная перпендикулярна радиусу. В прямоугольном треугольнике найдите центральный угол.',
      s: 'В △OAC угол A = 90°. ∠AOC = 90° - 28° = 62°. Центральный угол равен дуге = <b>62</b>',
      a: 62,
      fig: PF.circ
    },
    {
      q: 'Четырехугольник ABCD вписан в окружность. Угол ABC равен 105°, угол CAD равен 35°. Найдите угол ABD.',
      h: 'Опираются на одну дугу? Нет. Угол ABD и ACD опираются на одну дугу AD. Ищем через сумму углов.',
      s: '∠ABD = ∠ABC - ∠DBC. ∠DBC = ∠DAC (на дугу DC). ∠DBC = 35° (на дугу DC? Нет, CAD на CD). Стоп. ∠ABD и ∠ACD на дугу AD. ∠DBC и ∠DAC на дугу DC. Значит ∠DBC = ∠DAC = 35°. ∠ABD = 105° - 35° = <b>70</b>',
      a: 70,
      fig: PF.circ
    }
  ],
  tangent: [
    {
      q: 'Касательные в точках A и B к окружности с центром O пересекаются под углом 72°. Найдите угол ABO. Ответ дайте в градусах.',
      h: 'Треугольник AOB — равнобедренный. В четырехугольнике OACB сумма углов 360, углы при касании 90.',
      s: 'Угол AOB = 360 - 90 - 90 - 72 = 108. В △AOB: (180 - 108)/2 = <b>36</b>',
      a: 36,
      fig: PF.circ
    },
    {
      q: 'Точка O — центр окружности, на которой лежат точки A, B и C. Известно, что ∠ABC = 75° и ∠OAB = 43°. Найдите угол BCO. Ответ дайте в градусах.',
      h: 'Рассмотрите равнобедренные треугольники AOB и BOC.',
      s: '△AOB: AO=BO ⇒ ∠OBA = ∠OAB = 43°. ∠OBC = ∠ABC - ∠OBA = 75° - 43° = 32°. △BOC: BO=CO ⇒ ∠BCO = ∠OBC = <b>32</b>',
      a: 32,
      fig: PF.circ
    }
  ],
  inscribed: [
    {
      q: 'Радиус окружности, вписанной в равносторонний треугольник, равен 6. Найдите высоту этого треугольника.',
      h: 'В равностороннем треугольнике h = 3r.',
      s: 'h = 3 · 6 = <b>18</b>',
      a: 18
    },
    {
      q: 'Боковые стороны равнобедренного треугольника равны 5, основание равно 6. Найдите радиус вписанной окружности.',
      h: 'r = S / p. Найдите высоту, площадь и полупериметр.',
      s: 'h = √(5² - 3²) = 4. S = 0.5·6·4 = 12. p = (5+5+6)/2 = 8. r = 12 / 8 = <b>1.5</b>',
      a: 1.5,
      fig: PF.iso_abc
    }
  ],
  circumscribed: [
    {
      q: 'Гипотенуза прямоугольного треугольника равна 12. Найдите радиус описанной окружности.',
      h: 'В прямоугольном треугольнике R = c / 2.',
      s: 'R = 12 / 2 = <b>6</b>',
      a: 6,
      fig: PF.right_abc
    },
    {
      q: 'Сторона правильного треугольника равна 3√3. Найдите радиус окружности, описанной около этого треугольника.',
      h: 'R = a / √3',
      s: 'R = (3√3) / √3 = <b>3</b>',
      a: 3
    }
  ]
};

export function shuffle(arr) {
  const a = [...arr];
  for (let i = a.length - 1; i > 0; i--) { const j = Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]]; }
  return a;
}

export const COUNTS = Object.fromEntries(
  Object.entries(BANK).map(([k, v]) => [k, v.length])
);
COUNTS.mixed = Object.values(BANK).reduce((s,a) => s+a.length, 0);
